@{
    ViewBag.Title = "General Reference";
}
<script>
    $("#generalreference").addClass("active");
</script>
<div class="content-header row">
    <div class="content-header-left col-md-6 mb-2">
        <h3 class="content-header"><b>File Maintenance - General Reference</b></h3>
    </div>
</div>
<div class="row font-weight-bold black" id="FMGeneralReferenceController" ng-controller="FMGeneralReferenceController" ng-init="InitAllFunction();">
    <div class="col-12 col-xl-12 ">
        <div class="card box-shadow-2">
            <div class="card-content collapse show">
                <div class="card-body">
                    <ul class="nav nav-tabs bg-headerbc">
                        <li class="nav-item bg-headerbc">
                            <a class="nav-link active text-white" id="base-tab1" data-toggle="tab" aria-controls="tab1" href="#tab1" aria-expanded="true">Fund Type</a>
                        </li>
                        <li class="nav-item bg-headerbc">
                            <a class="nav-link text-white" id="base-tab3" data-toggle="tab" aria-controls="tab3" href="#tab3" aria-expanded="false">Bank Accounts</a>
                        </li>
                        <li class="nav-item bg-headerbc">
                            <a class="nav-link text-white" id="base-tab4" data-toggle="tab" aria-controls="tab4" href="#tab4" aria-expanded="false">Memo Account Classification</a>
                        </li>
                        <li class="nav-item bg-headerbc">
                            <a class="nav-link text-white" id="base-tab5" data-toggle="tab" aria-controls="tab5" href="#tab5" aria-expanded="false">Internal Revenue Allotment Share</a>
                        </li>
                    </ul>
                    <div class="tab-content px-1 pt-1" style="border:1px solid">
                        @* Fund Type *@
                        <div role="tabpanel" class="tab-pane active" id="tab1" aria-expanded="true" aria-labelledby="base-tab1">
                            <div class="content-body">
                                <div class="row mt-1">
                                    <div class="col-md-12" id="FundTypeID">

                                    </div>
                                </div>

                                <div class="row mt-1">
                                    <div class="col-md-12">
                                        <div class="card box-shadow-2">
                                            <div class="card-header bg-carheadercolor">
                                                <h4 class="card-title black"><b>List of Fund Types</b></h4>
                                            </div>
                                            <div class="card-body box-shadow-2" id="FundTypesTableID">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Bank Account*@
                        <div class="tab-pane" id="tab3" aria-labelledby="base-tab3">
                            <div class="content-body">
                                @* Bank Name *@
                                <div class="row mt-1">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-8">
                                        <div class="card box-shadow-2">
                                            <div class="card-header bg-carheadercolor">
                                                <h4 class="card-title black"><b>Bank</b></h4>
                                            </div>
                                            <div class="card-body box-shadow-2" id="BankID">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card box-shadow-2">
                                            <div class="card-header bg-carheadercolor mt-1">
                                                <h4 class="card-title black"><b>Bank Details</b></h4>
                                                @*<a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                                    <div class="heading-elements">
                                                        <ul class="list-inline mb-0">
                                                            <li><a data-action="collapse"><i class="ft-minus text-white"></i></a></li>
                                                        </ul>
                                                    </div>*@
                                            </div>
                                            <div class="card-content" @*collapse*@>
                                                <div class="card-body box-shadow-1" id="BankTableID">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @* Bank Account *@
                                <div class="row mt-1">
                                    <div class="col-md-12">
                                        <div class="card-body box-shadow-2" id="BankAccountID">

                                        </div>
                                    </div>
                                </div>
                                @* Bank Account Table *@
                                <div class="row mt-1" id="BankAccountTableID">

                                </div>
                            </div>


                            @* Add Account Type Modal *@
                            <div class="col-lg-8 col-md-8 col-sm-12">
                                <div class="form-group">
                                    <div class="modal animated zoomIn text-left" id="addAccountTypeModal" role="dialog">
                                        <div class="modal-dialog" style="max-width:600px" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header bg-headerbc white">
                                                    <h4 class="modal-title white"><i class="la la-plus mr-1"></i>Account Type</h4><button class="btn bg-headerbc pull-right p-0 white" data-dismiss="modal"><i class="la la-close"></i></button>
                                                </div>
                                                <div class="modal-body skin skin-square">
                                                    <div class="row">
                                                        <div class="col-md-1"></div>
                                                        <div class="col-md-10" id="AccountTypeID">

                                                        </div>
                                                    </div>
                                                    <div class="row mt-1">
                                                        <div class="col-md-1"></div>
                                                        <div class="col-md-10">
                                                            <div class="row" id="AccountTableID">

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Memo Account Classification*@
                        <div class="tab-pane" id="tab4" aria-labelledby="base-tab4">
                            <div class="content-body">
                                <div class="row mt-1">
                                    <div class="col-md-2">

                                    </div>
                                    <div class="col-md-8" id="MemoAccClassID">

                                    </div>
                                </div>
                                <div class="row mt-1">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-8">
                                        <div class="card box-shadow-2">
                                            <div class="card-header bg-carheadercolor">
                                                <h4 class="card-title black"><b>List of Memorandum Account Classifications</b></h4>
                                            </div>
                                            <div class="card-content collapse show">
                                                <div class="card-body box-shadow-2">
                                                    <div class="row" id="MemoClassTableID">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Internal Revenue Allotment Share*@
                        <div class="tab-pane" id="tab5" aria-labelledby="base-tab5">
                            <div class="content-body">
                                <div class="card-body box-shadow-2">
                                    <div class="row">
                                        <div class="col-md-1"></div>
                                        <div class="col-md-10" id="_IraID">
                                          
                                        </div>
                                    </div>
                                </div>
                                    <div class="card box-shadow-2">
                                        <div class="card-header bg-carheadercolor">
                                            <h4 class="card-title black"><b>Internal Revenue Allotment Share</b></h4>
                                        </div>
                                        <div class="card-content collapse show">
                                            <div class="card-body box-shadow-2">

                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-10" id="_IraTableID">
                                                       
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    @*Angular Function*@
    app.controller('FMGeneralReferenceController', function ($scope, $http, $sce) {
        var F = $scope, P = $http, D = $sce.trustAsHtml;

        F.InitAllFunction = function () {

            //Fund Type
            F.Get_FundTypeTables();
            //Bank Name
            F.Get_BankTables();
            //Account Type
            F.Get_AccountTypeTable();
            //Bank Account
            F.Get_BankAccountTable();
            //DropDown Bank Account Bank Name
            F.LoadDynamicDDBank();
            //DropDown Bank Account Code
            F.LoadDynamicDDAccountCode();
            //DropDown Bank Account Type
            F.LoadDynamicDDAccountType();
            //DropDown Memo Account Title
            F.LoadDynamicDDMemoAccClass();
            //DropDown Memo Account Revision Yr
            F.LoadDynamicDDMemoAccRevisionYr();
            //Memo Account Classification Table
            F.Get_MemoAccountClassTable();
            //Internal Revenue Allotment Table
            F.Get_InternalRevenueAllotmentTable();

        }
        @* Fund Type *@
        F.SuccessSave1 = function () {
            var SuccessMess = F.P;
            swalSuccess("Fund Type Successfully Added", SuccessMess);
        }
        F.SuccessSaveira = function () {
            var SuccessMess = F.P;
            swalSuccess("Internal Revenue Allotment Successfully Added", SuccessMess);
        }
        F.Get_FundTypeTables = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_FundTypeTables',
            }).then(function (response) {
                $("#FundTypesTableID").html(response.data);
                });
            F.Get_AddFundTypes();
        }
        F.LoadDynamicDDFundType = function () {
            var FundID = $("#FundNameListID").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicFundType',
                params: { FundID: FundID }
            }).then(function (response) {
                $("#FundTypeDivID").html(response.data);
            });
        }
        F.LoadDynamicDDFundType2 = function (FundID) {
            var FundID = $("#FundNameListID2").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicFundType',
                params: { FundID: FundID }
            }).then(function (response) {
                $("#FundTypeDivID2").html(response.data);
            });
        }
        F.Get_AddFundTypes = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AddFundTypes',
            }).then(function (response) {
                $("#FundTypeID").html(response.data);
                F.LoadDynamicDDFundType();
            });
        }
        F.Get_UpdateFundTypes = function (ListFundTypeID) {
            P({
                url: '/FileMaintenanceGeneralReference/Get_UpdateFundTypes',
                params: { ListFundTypeID: ListFundTypeID }
            }).then(function (response) {
                $("#FundTypeID").html(response.data);
                F.LoadDynamicDDFundType2();
            });
        }
        F.Get_DeleteFundTypes = function (ListFundTypeID) {
            P({
                url: '/FileMaintenanceGeneralReference/DeleteFundTypes',
                params: { ListFundTypeID: ListFundTypeID }
            }).then(function (response) {
                F.Get_FundTypeTables();
            });
        }

        @*Bank*@
        F.SuccessSave = function () {
            var SuccessMess = F.P;
            swalSuccess("Bank Account Successfully Added", SuccessMess);
        }
        F.Get_BankTables = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_BankTables',
            }).then(function (response) {
                $("#BankTableID").html(response.data);
                });
            F.Get_AddBanks();
        }
        F.Get_AddBanks = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AddBanks',
            }).then(function (response) {
                $("#BankID").html(response.data);
                F.LoadDynamicDDBank();
                CurrentAccountConcate();
            });
        }
        F.Get_UpdateBanks = function (BankID) {
            P({
                url: '/FileMaintenanceGeneralReference/Get_UpdateBanks',
                params: { BankID: BankID }
            }).then(function (response) {
                $("#BankID").html(response.data);
                CurrentAccountConcate();
            });
        }
        F.Get_DeleteBanks = function (BankID) {
            P({
                url: '/FileMaintenanceGeneralReference/DeleteBank',
                params: { BankID: BankID }
            }).then(function (response) {
                F.Get_BankTables();
            });
        }

        @*Bank Account - Bank Name*@
        F.LoadDynamicDDBank = function () {
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicBankName',
            }).then(function (response) {
                $("#BankDivID").html(response.data);
                CurrentAccountConcate();
            });
        }
        F.LoadSelectedDynamicDDBank = function () {
            var BankNameIDTempID = $("#BankNameIDTempID").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetSelectedDynamicBankName',
                params: { BankNameIDTempID: BankNameIDTempID }
            }).then(function (response) {
                $("#BankDivID").html(response.data);
                CurrentAccountConcate();
            });
        }
        @*Bank Account - Account Code*@
        F.LoadDynamicDDAccountCode = function () {
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicAccountCode',
            }).then(function (response) {
                $("#AccountCodeDivID").html(response.data);
            });
        }
        F.LoadSelectedDynamicDDAccountCode = function () {
            var AccountCodeIDTempID = $("#AccountCodeIDTempID").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetSelectedDynamicAccountCode',
                params: { AccountCodeIDTempID: AccountCodeIDTempID }
            }).then(function (response) {
                $("#AccountCodeDivID").html(response.data);
            });
        }
        @*Bank Account - Account Type*@
        F.SuccessSave2 = function () {
            var SuccessMess = F.P;
            swalSuccess("Account Type Successfully Added", SuccessMess);
        }
        F.SuccessUpdate = function () {
            var SuccessMess = F.P;
            swalSuccess("Account Type Successfully Update", SuccessMess);
        }
        F.LoadDynamicDDAccountType = function () {
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicAccountType',
            }).then(function (response) {
                $("#AccountTypeDivID").html(response.data);
            });
        }
        F.LoadSelectedDynamicDDAccountType = function () {
            var AccountTypeIDTempID = $("#AccountTypeIDTempID").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetSelectedDynamicAccountType',
                params: { AccountTypeIDTempID: AccountTypeIDTempID }
            }).then(function (response) {
                $("#AccountTypeDivID").html(response.data);
            });
        }
        F.Get_AddAccountType = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AddAccountType',
            }).then(function (response) {
                $("#AccountTypeID").html(response.data);
            });
        }
        F.Get_AccountTypeTable = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AccountTypeTable',
            }).then(function (response) {
                $("#AccountTableID").html(response.data);
            });
            F.Get_AddAccountType();
        }
        F.Get_UpdateAccountType = function (AccountTypeID) {
            P({
                url: '/FileMaintenanceGeneralReference/Get_UpdateAccountType',
                params: { AccountTypeID: AccountTypeID }
            }).then(function (response) {
                $("#AccountTypeID").html(response.data);
            });
        }
        F.Get_DeleteAccountType = function (AccountTypeID) {
            P({
                url: '/FileMaintenanceGeneralReference/DeleteAccountType',
                params: { AccountTypeID: AccountTypeID }
            }).then(function (response) {
                F.Get_AccountTypeTable();
                F.LoadDynamicDDAccountType();
            });
        }
        @*Bank Account Table*@
        F.Get_BankAccountTable = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_BankAccountTable',
            }).then(function (response) {
                $("#BankAccountTableID").html(response.data);
                });
            F.Get_AddBankAccount();
        }
        F.Get_AddBankAccount = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AddBankAccount',
            }).then(function (response) {
                $("#BankAccountID").html(response.data);
                F.LoadDynamicDDBank();
                F.LoadDynamicDDAccountCode();
                F.LoadDynamicDDAccountType();
                F.CurrentAccountConcate();
                F.SuccessSaveB();
                });
        }
        F.SuccessSaveB = function () {
            var SuccessMess = F.P;
            swalSuccess("Bank Account Successfully Added", SuccessMess);
        }
        F.Get_UpdateBankAccount = function (BankAccountID) {
            P({
                url: '/FileMaintenanceGeneralReference/Get_UpdateBankAccount',
                params: { BankAccountID: BankAccountID }
            }).then(function (response) {
                $("#BankAccountID").html(response.data);
                F.LoadSelectedDynamicDDBank();
                F.LoadSelectedDynamicDDAccountCode();
                F.LoadSelectedDynamicDDAccountType();
                });
        }
        F.Get_DeleteBankAccount = function (BankAccountID) {
            P({
                url: '/FileMaintenanceGeneralReference/DeleteBankAccount',
                params: { BankAccountID: BankAccountID }
            }).then(function (response) {
                F.Get_BankAccountTable();
                });
        }

        //Memo Account Classification  MemoAccClassID
        F.LoadDynamicDDMemoAccClass = function () {
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicMemoAccountTitle',
            }).then(function (response) {
                $("#MemoAccClass_AccountTitleDD").html(response.data);
            });
        }
        F.LoadDynamicDDMemoAccRevisionYr = function () {
            P({
                url: '/FileMaintenanceGeneralReference/GetDynamicMemoRevisionYear',
            }).then(function (response) {
                $("#MemoAccClass_RevisionYrID").html(response.data);
            });
        }
        F.Get_MemoAccountClassTable = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_MemoAccountClassTable',
            }).then(function (response) {
                $("#MemoClassTableID").html(response.data);
                });
            F.Get_AddMemoAccClassTable();
        }
        F.Get_AddMemoAccClassTable = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AddMemoAccClassTable',
            }).then(function (response) {
                $("#MemoAccClassID").html(response.data);
                });
            F.LoadDynamicDDMemoAccClass();
            F.LoadDynamicDDMemoAccRevisionYr();
        }
        F.LoadSelectedDynamicDDMemoAccClass = function () {
            var MMAccountTitleIDTempID = $("#MMAccountTitleIDTempID").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetSelectedDynamicMemoAccountTitle',
                params: { MMAccountTitleIDTempID: MMAccountTitleIDTempID }
            }).then(function (response) {
                $("#MemoAccClass_AccountTitleDD").html(response.data);
            });
        }
        F.LoadSelectedDynamicDDMemoAccRevisionYr = function () {
            var MMRevisionYrIDTempID = $("#MMRevisionYrIDTempID").val();
            P({
                url: '/FileMaintenanceGeneralReference/GetSelectedDynamicMemoRevisionYear',
                params: { MMRevisionYrIDTempID: MMRevisionYrIDTempID }
            }).then(function (response) {
                $("#MemoAccClass_RevisionYrID").html(response.data);
            });
        }
        F.Get_UpdateMemoAccount = function (MemoAccClassID) {
            P({
                url: '/FileMaintenanceGeneralReference/Get_UpdateMemoAccount',
                params: { MemoAccClassID: MemoAccClassID }
            }).then(function (response) {
                $("#MemoAccClassID").html(response.data);
                F.LoadSelectedDynamicDDMemoAccClass();
                F.LoadSelectedDynamicDDMemoAccRevisionYr();
                });
        }
        F.Get_DeleteMemoAccClass = function (MemoAccClassID) {
            P({
                url: '/FileMaintenanceGeneralReference/DeleteMemoAccount',
                params: { MemoAccClassID: MemoAccClassID }
            }).then(function (response) {
                F.Get_MemoAccountClassTable();
            });
        }

        //Internal Revenue Allotment Share
        F.Get_InternalRevenueAllotmentTable = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_InternalRevenueAllotmentTable',
            }).then(function (response) {
                $("#_IraTableID").html(response.data);
            });
           F.Get_AddInternalRevenueAllotment();
        }
        F.Get_AddInternalRevenueAllotment = function () {
            P({
                url: '/FileMaintenanceGeneralReference/Get_AddInternalRevenueAllotmentTable',
            }).then(function (response) {
                $("#_IraID").html(response.data);
            });
        }
        F.Get_UpdateInternalRevenueAllotment = function (IRAID) {
            P({
                url: '/FileMaintenanceGeneralReference/Get_UpdateInternalRevenueAllotment',
                params: { IRAID: IRAID }
            }).then(function (response) {
                $("#_IraID").html(response.data);
            });
        }
        F.Get_DeleteInternalRevenueAllotment = function (IRAID) {
            P({
                url: '/FileMaintenanceGeneralReference/DeleteInternalRevenueAllotment',
                params: { IRAID: IRAID }
            }).then(function (response) {
                F.Get_InternalRevenueAllotmentTable();
            });
        }

    });
    function CurrentAccountConcate() {

        var FundNameListIDTemp = document.getElementById("FundNameListID2");
        var FundNameListIDData = FundNameListIDTemp.options[FundNameListIDTemp.selectedIndex].text;

        var BankIDDDTemp = document.getElementById("BankIDDD");
        var BankIDDData = BankIDDDTemp.options[BankIDDDTemp.selectedIndex].text;

        var CurrentAccount = BankIDDData + " - " + FundNameListIDData;
        $("#CurrentAccountID").val(CurrentAccount);
    }
</script>
